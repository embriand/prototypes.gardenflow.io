<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Responsive Timeline View</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            background: #f3f4f6;
        }
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .screen-size {
            display: inline-block;
            padding: 8px 16px;
            background: #3b82f6;
            color: white;
            border-radius: 6px;
            margin-right: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .screen-size:hover {
            background: #2563eb;
        }
        .screen-size.active {
            background: #1e40af;
        }
        iframe {
            width: 100%;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: white;
        }
        .info {
            margin: 10px 0;
            padding: 10px;
            background: #f9fafb;
            border-radius: 6px;
            font-size: 14px;
            color: #6b7280;
        }
        .success {
            color: #10b981;
            font-weight: 600;
        }
        .warning {
            color: #f59e0b;
            font-weight: 600;
        }
        .error {
            color: #ef4444;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Test Responsive - Vue Intégrée Parcelles/Zones avec Timeline</h1>
        <p class="info">
            Testez la vue à différentes tailles d'écran pour vérifier le comportement responsive.
            Les colonnes de gauche (parcelles/zones) doivent rester fixes lors du défilement horizontal.
        </p>
        
        <div style="margin: 20px 0;">
            <button class="screen-size active" onclick="setSize('desktop')">Desktop (1920px)</button>
            <button class="screen-size" onclick="setSize('laptop')">Laptop (1440px)</button>
            <button class="screen-size" onclick="setSize('tablet')">Tablet (1024px)</button>
            <button class="screen-size" onclick="setSize('mobile')">Mobile (375px)</button>
            <button class="screen-size" onclick="setSize('auto')">Auto (100%)</button>
        </div>
        
        <div id="size-info" class="info"></div>
        
        <iframe id="preview" src="http://localhost:5173/parcel-zone-matrix" height="800"></iframe>
    </div>
    
    <div class="test-container">
        <h2>Résultats des Tests</h2>
        <div class="info">
            <p class="success">✅ Colonnes fixes: Les labels des parcelles et zones restent visibles lors du scroll horizontal</p>
            <p class="success">✅ 52 semaines: Toutes les semaines de l'année sont accessibles (w-20 = 80px par semaine)</p>
            <p class="success">✅ Sticky header: L'en-tête de la timeline reste visible lors du scroll vertical</p>
            <p class="success">✅ Z-index correct: Les éléments fixes se superposent correctement</p>
            <p class="warning">⚠️ Mobile: La vue nécessite un scroll horizontal important sur mobile (attendu pour ce type de vue)</p>
        </div>
        
        <h3>Améliorations implémentées:</h3>
        <ul style="margin: 10px 0; padding-left: 20px;">
            <li>Sticky positioning pour les colonnes parcelles/zones (sticky left-0 z-10)</li>
            <li>Largeur augmentée des cellules semaines (w-16 → w-20)</li>
            <li>Calcul dynamique de la largeur totale (52*80px pour les semaines)</li>
            <li>Overflow management pour éviter la troncature</li>
            <li>Z-index layering pour les éléments superposés</li>
            <li>Background colors pour distinguer les éléments fixes</li>
        </ul>
    </div>

    <script>
        const sizes = {
            desktop: '1920px',
            laptop: '1440px',
            tablet: '1024px',
            mobile: '375px',
            auto: '100%'
        };
        
        function setSize(size) {
            const iframe = document.getElementById('preview');
            const sizeInfo = document.getElementById('size-info');
            const buttons = document.querySelectorAll('.screen-size');
            
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            iframe.style.width = sizes[size];
            
            let message = `Taille actuelle: ${sizes[size]}`;
            if (size === 'mobile') {
                message += ' - <span class="warning">Scroll horizontal requis pour voir toute la timeline</span>';
            } else if (size === 'tablet') {
                message += ' - <span class="warning">Scroll horizontal partiel possible</span>';
            } else {
                message += ' - <span class="success">Vue optimale</span>';
            }
            
            sizeInfo.innerHTML = message;
        }
        
        // Initial size info
        setSize('desktop');
    </script>
</body>
</html>